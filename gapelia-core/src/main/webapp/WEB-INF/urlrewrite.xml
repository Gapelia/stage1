<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN" "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">
<urlrewrite>
	 <rule>
        <from>^/$</from>
        <to>/index.jsp</to>
    </rule>
    <rule match-type="regex">
        <note>Remove trailing slash</note>
        <from>^(.*)/$</from>
        <to type="permanent-redirect">$1</to>
    </rule>
    <rule>
    	<from>^/read/([0-9]+)$</from>
    	<to>/templates/read/index.jsp</to>
    </rule>
    <outbound-rule>
    	<from>^/templates/read/index.jsp</from>
    	<to>/read/([0-9]+)$</to>
    </outbound-rule>
    <rule>
        <from>^/user/([0-9]+)$</from>
        <to>/templates/user/index.jsp</to>
    </rule>
    <outbound-rule>
        <from>^/templates/user/index.jsp</from>
        <to>/user/([0-9]+)$</to>
    </outbound-rule>
    <rule>
		<from>^/onboard$</from>
		<to>/onboard.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/onboard.jsp$</from>
		<to>/onboard</to>
	</outbound-rule>

    <rule>
        <from>^/finalize-setup$</from>
        <to>/fin.jsp</to>
    </rule>
    <outbound-rule>
        <from>^/fin.jsp$</from>
        <to>/finalize-setup</to>
    </outbound-rule>

	<rule>
		<from>^/preview$</from>
		<to>/templates/preview/index.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/preview/index.jsp$</from>
		<to>/preview</to>
	</outbound-rule>

	<rule>
		<from>^/featured$</from>
		<to>/templates/featured/index.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/featured/index.jsp$</from>
		<to>/featured</to>
	</outbound-rule>

	<rule>
		<from>^/me$</from>
		<to>/templates/me/index.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/me/index.jsp$</from>
		<to>/me</to>
	</outbound-rule>

	<rule>
		<from>^/accounts$</from>
		<to>/templates/accounts/index.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/accounts/index.jsp$</from>
		<to>/accounts</to>
	</outbound-rule>

	<rule>
		<from>^/createbook$</from>
		<to>/templates/create/createbook.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/create/createbook.jsp$</from>
		<to>/createbook</to>
	</outbound-rule>
	<rule>
		<from>^/createlibrary$</from>
		<to>/templates/create/createlibrary.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/create/createlibrary.jsp$</from>
		<to>/createlibrary</to>
	</outbound-rule>
	<rule>
		<from>^/book/([0-9]+)/(.*)$</from>
		<to>/templates/books/books.jsp?id=$1&amp;name=$2</to>
	</rule>

	<outbound-rule>
		<from>^/templates/books/books.jsp?id=([0-9]+)&amp;name=(.*)$</from>
		<to>/book/$1/$2</to>
	</outbound-rule>

	<rule>
		<from>^/editbook/([0-9]+)$</from>
		<to>/templates/edit/editbook.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/edit/editbook.jsp$</from>
		<to>/editbook/([0-9]+)$</to>
	</outbound-rule>

	<rule>
		<from>^/editlibrary/([0-9]+)$</from>
		<to>/templates/edit/editlibrary.jsp</to>
	</rule>
	<outbound-rule>
		<from>^/templates/edit/editlibrary.jsp$</from>
		<to>/editlibrary/([0-9]+)$</to>
	</outbound-rule>
	<rule>
		<from>^/library/([0-9]+)$</from>
		<to>/templates/libraries/library.jsp?</to>
	</rule>
	<outbound-rule>
		<from>^/templates/libraries/library.jsp?$</from>
		<to>/library/([0-9]+)$</to>
	</outbound-rule>

    <rule>
        <from>^/librarymanager$</from>
        <to>/templates/edit/libraryManager.jsp</to>
    </rule>
    <outbound-rule>
        <from>^/templates/edit/libraryManager.jsp$</from>
        <to>/librarymanager</to>
    </outbound-rule>
    <rule>
        <from>^/manageLibrary/([0-9]+)$</from>
        <to>/templates/edit/manageLibrary.jsp?</to>
    </rule>
    <outbound-rule>
        <from>^/templates/edit/manageLibrary.jsp?$</from>
        <to>/manageLibrary/([0-9]+)$</to>
    </outbound-rule>
    <rule>
        <from>^/about$</from>
        <to>/about.jsp?</to>
    </rule>
    <outbound-rule>
        <from>^/about.jsp?$</from>
        <to>/about$</to>
    </outbound-rule>

</urlrewrite>

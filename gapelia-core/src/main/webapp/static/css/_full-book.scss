
/************************************************************************************ FULL-BOOK/SCSS **/

.full-book {

	#the-book {
		width: 100%; height: 100%;
		position: relative;
	}

	.mp-pushed {
		#g-menu-toggle {
			top: -5rem !important;
			z-index: 1;
		}
	}

	.bb-item {
		.content {
			width: 100%; height: 100%;
		}
	}

	/** CONTROLS ****************************************************************************************/

	header {
		width: 100%; height: 50px;
		top: -50rem; left: 0;

		background-color: $white; // rgba($black, 0.3)
		border-bottom: 1px solid rgba($black, 0.05);
		color: $black;
		position: absolute;
		text-align: center;
		transition: all 0.2s ease;
		z-index: 102;

		.share-book {
			top: 50%; right: 1rem;

			position: absolute;
			transform: translateY(-50%);

			-o-transform: translateY(-50%);
			-ms-transform: translateY(-50%);
			-moz-transform: translateY(-50%);
			-webkit-transform: translateY(-50%);

			li {
				width: 32px; height: 32px;

				display: inline-block;
				font-size: 32px;
				margin: 0 1rem 0 0;

				a {
					width: 100%; height: 100%;
					display: block;
				}

				&:last-child { margin: 0; }

				// @include hide-text;
			}

			// .facebook	{ background-position: 96px 1px; }
			// .twitter	{ background-position: 64px 1px; }
			// .email		{ background-position: 39px -1285px; }
		}
	}

	#g-menu-toggle, #header-toggle, #next-book-toggle { position: fixed; }

	#g-menu-toggle {
		color: $white;
		left: 1rem;
		padding: 0 !important;
		width: 45px;
		z-index: 103;

		.ion-drag { text-shadow: 0 0 1px rgba($black, 0.4) !important; }
	}

	#header-toggle, #next-book-toggle {
		// width: 47px; height: 47px;

		// background-image: url("../images/sprite-sheet.png");
		// background-size: 300px 750px;
		opacity: 1;
		top: 0.5rem;
		transition: all 0.2s ease;
		z-index: 101;

		// @include hide-text;
	}

	#header-toggle {
		// background-position: 204px -1177px;
		cursor: default;
		left: 48.2%;
		text-align: center;
	}

	#next-book-toggle {
		// background-position: 455px -1181px;
		color: $white;
		cursor: pointer;
		font-size: 36px;
		right: 1rem;
		// text-shadow: 0 0 2px rgba($black, 0.3);

		.ion-forward { text-shadow: 0 0 1px rgba($black, 0.4) !important; }
	}

	#header-info {
		cursor: default;
		font-size: 1.3em;
		font-weight: 300;
		line-height: 2.5em;
	}

	#header-author {
		&:before {
			content: "by ";
			@include serif;
			font-size: 0.8em;
			font-style: italic;
			text-transform: lowercase;
		}
	}

	#bb-nav-prev, #bb-nav-next {
		width: 32px; height: 64px;

		background-color: rgba($black, 0.7);
		background-image: none;
		bottom: 0;
		color: $white;
		cursor: pointer;
		font-family: "Ionicons";
		font-size: 2rem;
		padding: 1rem 0 0 0;
		position: fixed;
		text-align: center;
		z-index: 2000;
	}

	#bb-nav-prev {
		// background-position: 0 -1285px;
		left: 0;
	}

	#bb-nav-next {
		// background-position: -30px -1285px;
		right: 0;
	}

	/** LAYOUT ******************************************************************************************/

	.fluid-wrapper, .photo-wrapper, .overlay-wrapper, .phototext-wrapper, .vertical-wrapper,
	.video-wrapper, .backcover-wrapper {
		overflow: hidden;
		width: 100%;

		.page-bg, iframe {
			width: 100%; height: 100%;
			bottom: 0; left: 0;

			position: absolute;
		}

		.page-title-elem, .page-geotag-elem, .page-desc { display: block; }
		.page-title-elem, .page-geotag-elem { margin: 0 0 0.5rem 0; }

		.page-title-elem {
			font-size: 1.5em;
			font-weight: 700;
			line-height: 1.2;
		}

		.page-geotag-elem {
			background-color: transparent;
			border: 0;
			color: $white;
			font-size: 0.65em;
			font-weight: 600;
			text-transform: uppercase;
			width: 100%;

			&:before {
				content: "in ";
				@include serif;
				font-style: italic;
				text-transform: lowercase;
			}
		}

		.page-desc {
			@include serif;
			font-size: 1em;
			line-height: 1.5em;
			margin: 1rem 0 0 0;
			// min-height: 50px;
			text-align: center;
			// white-space: pre-wrap; // preserve line breaks!
		}

		p {
			font-size: inherit;
			line-height: inherit;
			margin: 0 0 1.5rem 0;
		}

		.image-attribution {
			background-color: rgba($white, 0.3);
			bottom: 0;
			cursor: default;
			font-size: 0.8rem;
			line-height: 1;
			padding: 0.5rem 1rem;
			position: absolute;
			z-index: 1;

			p {
				margin: 0; padding: 0;
				color: rgba($black, 0.9);

				a { font-weight: 700; }
			}
		}

		#author-info {
			font-size: 0.6rem;

			#author-name {
				cursor: default;
				letter-spacing: 2px;
				line-height: 1;
				margin: 0 0 0.5rem 0;
				text-align: right;
				text-transform: uppercase;

				&:before {
					content: "written by";
					display: block;
					@include serif;
					font-style: italic;
					margin: 0 0 0.5rem 0;
					text-transform: lowercase;
				}
			}

			#author-avatar {
				width: 40px; height: 40px;

				border-radius: 300rem;
				display: block !important;
			}
		}
	}

	.scroller-wrapper {
		width: 100%; height: 100%;

		overflow-y: auto;
		position: absolute;
	}

	.phototext-preview-wrapper, .vertical-preview-wrapper, .video-preview-wrapper {
		.page-desc {
			overflow-x: hidden;
			overflow-y: auto;
			padding: 0 1rem 1rem 0;
		}
	}

	.fluid-wrapper {
		background-color: $white;
		height: 100%;

		.image-attribution {
			bottom: 0; right: 0;
			margin: 0 auto;
		}

		#author-info {
			position: absolute;
			top: 3rem;
			width: 13%;

			#author-avatar {
				float: right;
			}
		}

		#author-info, article {
			// display: inline-block;
		}

		.button-wrapper, section, .fluid-preview { transition: all 0.2s ease; }

		section {
			width: 100%; height: 15%; // height: 65%;
		}

		.draggable-placeholder {
			// background-image: linear-gradient(to top, $white, transparent); // Tommy
			height: 75%;
			position: absolute;
		}

		.fluid-preview {
			width: 100%; min-height: 53%;
			top: 75%; /* 20% */ left: 0;

			background-color: $white;
			color: $black;
			font-size: 1.5em;
			line-height: 2.5em;
			padding: 1rem 2rem 0 2rem;
			position: absolute;

			.page-title-elem, .page-desc {
				margin: 1rem auto 0;
				text-align: left;
				width: 70%;
			}

			.page-desc { padding: 0 0 5rem 0; }

			h5 {
				margin: 0 auto;
				width: 70%;
			}
		}
	}

	.photo-wrapper, .overlay-wrapper {
		#author-info {
			#author-name {
				color: $white;
				text-align: center;
			}

			#author-avatar { margin: 0 auto; }
		}
	}

	.photo-wrapper {
		background-color: $white;

		.page-bg-wrapper {
			width: 50%; height: inherit; max-height: 66%; // height: auto
			top: 35vh; left: 25%; // top: 50%

			position: relative;
			transform: translateY(-50%);

			-o-transform: translateY(-50%);
			-ms-transform: translateY(-50%);
			-moz-transform: translateY(-50%);
			-webkit-transform: translateY(-50%);
		}

		.page-bg {
			width: 100%; height: auto;
			box-shadow: 0 0 5px 0 rgba($black, 0.3);
		}

		.image-attribution {
			right: 0;
			width: auto;
		}

		.photo-preview {
			width: 100%; height: auto;
			margin: 2.5rem 0 0 0; padding: 1rem 2rem;

			color: $black;
			position: relative;

			.page-title-elem, .page-geotag-elem, .page-desc { text-align: center; }

			.page-title-elem {
				margin: 0 auto 0.5rem;
				width: 52%;
			}

			.page-geotag-elem { color: $black; }
		}

		#author-info {
			#author-name { color: $black; }
		}
	}

	.overlay-wrapper {
		.overlay-preview {
			width: 100%; height: 100%;
			top: 0; left: 0;

			background-color: rgba($black, 0.7);
			position: absolute;

			article {
				margin: 15% auto; padding: 2rem;

				position: relative;
				text-align: center;
				width: 60%;
			}

			.page-desc {
				margin: 0 0 0.5rem 0; padding: 0;

				color: $white;
				font-size: 36px;
				line-height: 40px;
			}

			.page-geotag-elem {
				color: $white;
				margin: 2rem 0 0 0;
				text-align: center;
			}
		}

		.image-attribution { right: 0; }
	}

	.phototext-wrapper, .vertical-wrapper, .video-wrapper {
		#author-info {
			margin: -0.5rem 0 0 0;

			#author-name, #author-avatar {
				display: inline-block !important;
				vertical-align: middle;
			}

			#author-name {
				margin: 0;
				text-align: left;
			}

			#author-avatar {
				margin: 0 1rem 0 0;
			}
		}
	}

	.phototext-wrapper {
		.phototext-preview {
			width: 30%; height: 100%;
			top: 0; right: 0;

			background-color: rgba($white, 0.7);
			color: $black;
			overflow-y: auto; //
			padding: 4rem 2rem 2rem 2rem;
			position: absolute;

			.page-geotag-elem {
				margin: 0 0 1rem 0; padding: 0 0 1rem 0;

				color: $white;
				border-bottom: 1px dotted $white;
			}

			.page-desc { text-align: left; }
		}
	}

	.vertical-wrapper {
		section {
			width: 25%; height: 100%;
		}

		.draggable-placeholder {
			width: 25%; height: 100%;
		}

		.page-bg {
			width: auto; height: 100%;
		}

		.vertical-preview {
			width: 75%; height: 100%;
			top: 0; right: 0;

			background-color: $white;
			border-left: 1px solid $gray-ii;
			color: $black;
			// font-size: 1.5em;
			// line-height: 2.5em;
			overflow-y: auto; //
			padding: 4rem 4rem 2rem 2rem;
			position: absolute;

			.page-geotag-elem {
				margin: 0 0 1rem 0; padding: 0 0 1rem 0;

				border-bottom: 1px dotted $black;
				color: $black;
			}

			.page-desc { text-align: left; }
		}
	}

	.video-wrapper {
		.video-preview {
			width: 100%; height: 100%;

			background-color: $white;
			position: absolute;
		}

		article {
			width: 30%; height: 100%;
			top: 0; right: 0;

			border-left: 1px solid $gray-ii;
			color: $black;
			overflow-y: auto; //
			padding: 4rem 2rem 2rem 2rem;
			position: absolute;

			.page-geotag-elem {
				margin: 0 0 1rem 0; padding: 0 0 1rem 0;

				color: $black;
				border-bottom: 1px dotted $black;
			}

			.page-desc { text-align: left; }
		}

		.video-player-container {
			width: 70%; height: 100%;
			top: 0; left: 0;

			position: absolute;

			iframe {
				width: 100%; height: 100%;
				background-color: $gray-i;
			}
		}

		// .play-video { display: none; }

		.button-wrapper {
			bottom: 10%;
			position: absolute;
			text-align: center;
			width: 70%;
			z-index: 1;

			input {
				margin: 0 auto; padding: 0.5rem;

				background-color: rgba($white, 0.3);
				border: 3px solid $black;
				color: $black;
				font-weight: 700;
				position: relative;
				text-align: center;
				text-transform: uppercase;
				transition: all 0.2s ease;
				z-index: 2;
			}
		}
	}

	.backcover-wrapper {
		#fin, #fin-next {
			float: left;
			height: 100%;
		}

		#fin {
			background-color: $white;
			color: $black;
			padding: 8rem 4rem 0 4rem;
			width: 60%;

			.appreciate, h2 {
				display: inline-block;
				vertical-align: top;
			}

			.appreciate { margin: 0 2rem 0 0; }

			h2 {
				margin: 0;

				&:before {
					content: "You just read";
					display: block;
					font-size: 0.5em;
					line-height: 1em;
					margin: 0 0 0 0.1rem;
				}
			}

			.share-book {
				margin: -2rem 0 2rem 8.5rem;

				&:before {
					content: "Share this";
					@include serif;
					float: left;
					font-style: italic;
					line-height: inherit;
					margin: 0 0.5rem 0 0;
					vertical-align: bottom;
				}

				li {
					width: auto; height: auto;

					background-image: none;
					color: $black;
					float: left;
					font: initial;
					font-size: inherit;
					line-height: inherit;
					margin: 0;

					a { display: initial; }

					&:after {
						content: "\00b7";
						display: inline-block;
						font-style: italic;
						opacity: 0.3;
						margin: 0 0.3rem;
					}

					&:first-child { color: $facebook; }
					&:nth-child(2) { color: $twitter; }

					&:last-child {
						color: $slate;
						&:after { content: ""; }
					}
				}
			}

			section { margin: 0 0 5rem 0; }

			#author-avatar, #library-avatar {
				width: 100px; height: 100px;
				border-radius: 300rem;
				overflow: hidden;
				position: relative;

				&:after {
					width: 100%; height: 100%;
					top: 0; left: 0;
					bottom: 0; right: 0;

					box-shadow: inset 0 0 1px rgba($black, 0.5),inset 0 20px 50px 0 rgba($black, 0.95);
					border-radius: 300rem;
					content: "";
					margin: 0 auto;
					opacity: 0.3;
					position: absolute;
				}
			}

			#author-avatar {
				img {
					width: auto; height: 100%;
				}
			}

			#library-avatar {
				img {
					width: 100%; height: auto;
				}
			}

			#author-avatar, #author-name,
			#library-avatar, #library-name	{
				display: inline-block;
				vertical-align: top;
			}

			#author-name, #library-name {
				font-size: 24px;
				margin: 0 0 0.5rem 2rem;

				&:before {
					@include serif;
					font-size: 0.8em;
					font-style: italic;
				}
			}

			#author-name {
				&:before { content: "by "; }
			}

			#library-name {
				&:before { content: "found in "; }
			}

			#author-bio-blurb, #library-info-blurb {
				@include serif;
				font-size: 1.2em;
				font-style: italic;
				line-height: 1.2em;
				margin: -4rem 0 0 8.5rem;
			}
		}

		#fin-next {
			color: $white;
			position: relative;
			text-align: left;
			width: 40%;

			h2, section { z-index: 1; }

			h2 {
				line-height: 1.1em;
				width: auto;

				&:before {
					content: "Read next";
					display: block;
					font-size: 0.5em;
					line-height: 1em;
					margin: 0 0 0 0.1rem;
				}
			}

			section {
				top: 8.6rem; left: 2rem;
				position: absolute;
			}

			&:after {
				top: 0; right: 0;
				bottom: 0; left: 0;

				background-image: linear-gradient(to right, $black, transparent);
				content: "";
				opacity: 0.8;
				position: absolute;
				z-index: 0;
			}
		}
	}

}

/** BOOKBLOCK *****************************************************************************************/

.bb-bookblock {
	width: 400px; height: 300px;

	backface-visibility: hidden;
	margin: 0 auto;
	perspective: 1300px;
	position: relative;
	z-index: 100;

	.content { position: absolute; }
}

.bb-page {
	position: absolute;
	transform-style: preserve-3d;
	transition-property: transform;
}

.bb-vertical {
	.bb-content {
		bottom: 0; left: 0;

		position: absolute;
		width: 200%;
	}

	.bb-back { transform: rotateY(-180deg); }

	.bb-page {
		width: 50%; height: 100%;

		left: 50%;
		transform-origin: left center;
	}
}

.bb-horizontal {
	.bb-content { height: 200%; }

	.bb-back { transform: rotateX(-180deg); }

	.bb-page {
		width: 100%; height: 50%;

		top: 50%;	
		transform-origin: center top;
	}
}

.bb-page > div,
.bb-outer,
.bb-content,
.bb-inner {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: $white;
	position: absolute;
}

.bb-page > div {
	transform-style: preserve-3d;
	width: 100%;
}

.bb-page > div:not(:only-child) { backface-visibility: hidden; }

.bb-outer {
	overflow: hidden;
	width: 100%;
	z-index: 999;
}

.bb-overlay, 
.bb-flipoverlay {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background-color: rgba($black, 0.7);
	opacity: 0;
	position: absolute;
}

.bb-flipoverlay { background-color: rgba($black, 0.2); }

.bb-bookblock.bb-vertical > div.bb-page:first-child,
.bb-bookblock.bb-vertical > div.bb-page:first-child .bb-back {
	transform: rotateY(180deg);
}

.bb-bookblock.bb-horizontal > div.bb-page:first-child,
.bb-bookblock.bb-horizontal > div.bb-page:first-child .bb-back {
	transform: rotateX(180deg);
}

.bb-vertical .bb-front .bb-content { left: -100%; }
.bb-horizontal .bb-front .bb-content { top: -100%; }

.bb-vertical {
	.bb-flip-next, .bb-flip-initial { transform: rotateY(-180deg); }

	.bb-flip-prev { transform: rotateY(0deg); }
	.bb-flip-next-end { transform: rotateY(-15deg); }
	.bb-flip-prev-end { transform: rotateY(-165deg); }
}

.bb-horizontal {
	.bb-flip-next, .bb-flip-initial { transform: rotateX(180deg); }

	.bb-flip-prev { transform: rotateX(0deg); }
	.bb-flip-next-end { transform: rotateX(15deg); }
	.bb-flip-prev-end { transform: rotateX(165deg); }
}

.bb-item {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: $white;
	display: none;
	position: absolute;
}

.bb-custom-wrapper {
	width: 100%; height: 100%;
	position: relative;

	.bb-bookblock {
		width: 100%; height: 100%;
		perspective: 2000px;
	}
}

.bb-custom-side {
	width: 50%; height: 100%;

	align-items: center;
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	float: left;
	justify-content: center;
	overflow: hidden;
}

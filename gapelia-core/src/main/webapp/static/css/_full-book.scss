
//////////////////////////////////////////////////////////////////////////////////// FULL-BOOK/SCSS ///

.g-body hr { margin: 4rem auto 20px auto; }

.full-book {

	// modal for collecting to library //
  
  #the-book {
		width: 100%; height: 100%;
		position: relative;
    
    #collection-pop {
      background-color: $slate;
      border-bottom-left-radius: 5px;
      border-bottom-right-radius: 5px;
      border-bottom: none !important;
      color: white;
      height: 8%;
      left: 43% !important;
      letter-spacing: 0.015555em;
      position: absolute;
      top: 0;
      transition: opacity 0.5s ease;
      z-index: 100 !important; 
      
      p {
        font-size: 1rem;
        padding: 1rem 1rem 0rem 1rem;
      }
      
      a {
        display: inline !important;
        margin: 5px;
        text-decoration: underline;
      }	
    }
    
    #stay-right {
      height: 75px;
      padding: 1.4rem 1.25rem 0 0;
      position: absolute;
      text-align:right;
      top: 0; right: 0;
      width: 100%;
      z-index: 100;
      
      a {
        background-image: radial-gradient(rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.20));
        color: white;
        border-radius: 400em;
        border: 1px solid rgba($white, 0.35);
        font-size: 1rem;
        //font-style: italic;
        letter-spacing: 0.5px;
        padding: 8px 11px 8px 11px;
        
        &:hover {
          background-color: #59B3A6 !important;
          background-image: none !important;
          border: 1px solid #59B3A6 !important;
          color: white;
          border-radius: 8px;
          opacity: 1;
          
          &:after { content: "Add to library"; margin-left: 5px; }
        }
      }
      
      .clicked-list {
        background-color: #59B3A6 !important;
        background-image: none !important;
        border: 1px solid #59B3A6 !important;
        color: white;
        border-radius: 8px;
        opacity: 1;
          
        &:after { content: "Add to library"; margin-left: 5px; }
      }
      
      ul {
        display: none;
        top: 3.8rem; right: 1.25rem !important;
				background-color: white;
        border: 1px solid rgba($black, 0.1);
				border-radius: 5px;
        box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.36);
				min-width: 225px;
				position: absolute;
				width: auto;
        
        li {
          border-bottom: 1px solid rgba($black, 0.1);
          color: rgba(black, 0.75);
          font-weight: 100;
          padding: 12px;
          
          #check-icon {
            color: #59B3A6;
            margin-right: 10px;
          }
          
          &:last-child { border: 0; margin-bottom: 0; }
          
          &:first-letter { text-transform: uppercase; }
          
          a {
            background-image: none;
            border: none;
            color: rgba($black, 0.8);
            padding: 0;
            
            &:hover {
              background-color: transparent !important;
              border: none !important;
              color: #59B3A6 !important;
              
              &:after { content: none; margin-left: 0; }
            }
          }  
        }
      }
    }
	}
  
  // modal for collecting to library //

	.mp-pushed {
		#g-menu-toggle {
			display: none;
			z-index: 1;
		}
	}

	.bb-item {
		.content {
			width: 100%; height: 100%;
		}
	}

	/// CONTROLS ////////////////////////////////////////////////////////////////////////////////////////

	header {
		width: 100%; height: 25px;
		top: -50px; left: 0;

		background-color: $white; // rgba($black, 0.3)
		border-bottom: 1px solid rgba($black, 0.01);
		color: $black;
		position: absolute;
		text-align: center;
		transition: all 0.2s ease;
		z-index: 102;

		&:hover {
			height: 50px;

			.share-book { display: block; }

			#header-info {
				font-size: 1.3rem;
				line-height: 3.2rem;
			}
		}

		.share-book {
			top: 50%; right: 1rem;

			display: none;
			position: absolute;
			transform: translateY(-50%);

			-o-transform: translateY(-50%);
			-ms-transform: translateY(-50%);
			-moz-transform: translateY(-50%);
			-webkit-transform: translateY(-50%);

			li {
				width: 32px; height: 32px;

				display: inline-block;
				font-size: 32px;
				margin: 0 1rem 0 0;

				a {
					width: 100%; height: 100%;
					display: block;
				}

				&:last-child { margin: 0; }
			}
		}
	}

	#g-menu-toggle {
    color: $white;
		padding: 0 !important;
		position: fixed;
		width: 45px;
		z-index: 103 !important;

		i { text-shadow: 0 0 1px rgba(0, 0, 0, 0.5) !important }
	}

	#g-menu-toggle {
    background-image: url("../images/folio-icon-solid.png") !important;
    color: transparent !important ;
    left: 0.7rem; top: 0.6rem;
    width: 7.5%;
    
    i { text-shadow: none !important }
  }

	#header-info {
		cursor: default;
		font-size: 0.8rem;
		font-weight: 300;
		line-height: 1.6rem;
		transition: all 0.2s ease;
	}

	#header-author {
		&:before {
			content: "by ";
			@include serif;
			font-size: 0.8em;
			font-style: italic;
			text-transform: lowercase;
		}
	}

	#bb-nav-prev, #bb-nav-next {
		width: 50px; height: 50px;

		// background-color: rgba($black, 0.7);
		background-image: none;
		bottom: 0;
		color: $white;
		cursor: pointer;
		font-family: "Ionicons";
		font-size: 2rem; 
		padding: 1rem 0 0 0; 
		position: fixed;
		text-align: center;
		text-shadow: 0 0 3px rgba($black, 0.8) !important;
		z-index: 2000;
	}

	#bb-nav-prev { left: 0; }
	#bb-nav-next { right: 0; } 

	/// LAYOUT //////////////////////////////////////////////////////////////////////////////////////////

	.fluid-wrapper, .photo-wrapper, .overlay-wrapper, .phototext-wrapper, .vertical-wrapper,
	.video-wrapper, .backcover-wrapper {
		overflow: hidden;
		height: 100%; width: 100%;

		.page-bg, iframe {
			bottom: 0; left: 0;

			position: absolute;
			width: 100%;
		}

		iframe { height: 100%; }
		.page-bg { height: auto; }

		.page-title-elem {
			color: rgba($black, 0.8);
      font-size: 3rem; 
			font-weight: 700;
			line-height: 1.25;
			margin: 0 0 0.5rem 0;
      margin-top: 1.75rem !important;
		}

		.page-desc {
			@include serif;
			color: rgba($black, 0.7);
      font-size: 1.4rem;
      font-weight: 100;
      letter-spacing: .01rem;
			line-height: 2.3rem;
			margin: 1.5rem 0 0 0;
      margin-top: 2rem !important;
		}

		p {
			color: inherit;
			font-size: inherit;
			line-height: inherit;
			margin: 0 0 1.5rem 0;
			position: relative;
		}

		.image-attribution { 
			background-color: rgba($white, 0.75);
			bottom: 0;
			color: rgba($black, 0.95);
			cursor: default;
			font-size: 0.8rem;
			line-height: 1.1rem;
			// margin: 10px;
			padding: 0.2rem 1rem;
			position: absolute;
			z-index: 1;

			p {
				margin: 0; padding: 0;
				color: rgba($black, 0.95);

				a { font-weight: 700; }
			}
		}

		.author-info {
			font-size: 0.6rem;
      z-index: 1;

			.author-name {
				border-right: 1px solid rgba($black, 0.3);
        cursor: default;
				letter-spacing: 2px;
				line-height: 1;
				margin: 0 0 0.5rem 0;
        padding-right: 1.5rem;
				text-align: right;
				text-transform: uppercase;

				&:before {
					content: "written by";
					display: block;
					@include serif;
					font-style: italic;
					margin: 0 0 0.5rem 0;
					text-transform: lowercase;
				}
			}

			.author-avatar {
				width: 40px; height: 40px;

				border-radius: 300rem;
				display: block !important;
			}
		}

		.embed {
			width: 100%; height: auto;

			iframe {
				width: 100%; height: auto;
				position: relative;
			}

			iframe.embedly-embed { height: 480px; }

			a {
				img {
					width: 100%; height: auto;
					display: block !important;
				}
			}
		}
	}

	.overlay-wrapper, .photo-wrapper {
		.image-attribution { right: 0; }
	}

	.phototext-wrapper, .vertical-wrapper {
		.image-attribution { left: 0; }

		.page-desc {
			overflow-x: hidden;
			overflow-y: auto;
			// padding: 0 1rem 1rem 0;
		}
	}

	.scroller-wrapper {
		width: 100%; height: 100%;

		overflow-y: auto;
		position: absolute;
	}

	.fluid-wrapper {
		background-color: $white;
		height: 100%;

		section, .fluid-preview { transition: all 0.2s ease; }

		section {
			width: 100%; height: 15%;
		}

		.draggable-placeholder {
			height: 75%;
			position: absolute;
		}

		.fluid-preview {
			width: 100%; height: auto; // min-height: 53%;
			top: 75%; left: 0; bottom: 0;

			background-color: $white;
			padding: 1rem 2rem 0 2rem;
			position: absolute;

			article {
				// margin: 0 0 4rem 0;

				background-color: $white;
				padding: 0;
				left: 0;
				position: absolute;
				width: 100%;
        
        
        #fin {
          padding-top: 2rem;
          position: relative;
          width: 100%;
          
          #credits {
            color: rgba($black, 0.8);
            font-size: 1rem;
            font-style: italic;
            font-weight: 100;
            margin: 2.5rem 0 0 9rem;
            
            .author-name {
              display: inline;
              margin-left: 6px;
              opacity: 0.5;
              
              &:before {
                content: "by";
                font-style: italic;
                margin-right: 5px;
              }
            }
            
            #go-to-credits {
              margin-top: 4px;
              
              a {
                font-style: initial;
                opacity: 0.8;
                text-decoration: underline;
              }
            }
            
            img { display: none; }
          }
          
          figure.merci {
            left: 46%;
            margin: 0;
            position: absolute;
            text-align: center;
            right: 0; top: 2rem;
            width: 91px;
            
            .opening { margin: 0 !important; }
          }
          
          h2 { display: none; }
          
          .share-book {
            font-size: 1.8rem;
            margin: 0.75rem 0rem 1rem -0.25rem;
            position: relative;
            text-align: left;
            
            li {
              display: inline;
              margin: 5px;
            }
          }
        }
        
        #fin-next {
          background-color: $white;
          background-image: none !important;
          
          .book-title {
            bottom: 6rem; left: 59%;
            font-size: 1.6rem;
            padding-bottom: 2rem;
            position: relative;
            text-align: right;
            text-shadow: none;
            max-width: 35%;
            
            a {
              color: rgba($black, 0.7);
              font-weight: 500;
            }
            
            &:before {
              color: rgba($black, 0.7);
              content: "Read next";
              display: block;
              font-size: 0.9rem;
              font-weight: 100;
              text-shadow: none;
            }
          }  
        }
			}
      
      .page-title-elem, .page-desc {
				margin: 1rem auto 0;
				width: 60%;
			}

			h5 {
				margin: 0 auto;
				width: 70%;
			}

			.inserted-img {
				overflow: hidden;

				img {
					display: block !important;
					width: 100%;
				}
			}
    }

		.author-info {
			position: absolute;
			top: 2.35rem;
			width: 15%;
			margin: 0;

			.author-avatar {
        margin-left: 73%;
        margin-top: 0.5rem;
      }

			.author-name {
				text-align: right;
				&:before { text-align: right; }
			}
		}

		.image-attribution { right: 0; } 
	}

	.no-img {
		.fluid-preview { top: 2%; }
	}

	.photo-wrapper, .overlay-wrapper {
		.author-info {
			position: absolute;
			top: 3rem;
			width: 13%;
		}
	}

	.photo-wrapper { // this is superior to the old Photo Layout
		background-color: $white;
    height: 100%;

		.page-bg-wrapper {
			width: 50%; height: 65%;

			box-shadow: 0 0 5px 0 rgba($black, 0.3);
			left: 25%;
			line-height: 400px;
			overflow: hidden;
			position: relative;
			text-align: center;
      top: 15% !important;
		}

		.page-bg { vertical-align: middle; }

		.photo-preview {
			width: 100%; height: 100%; // height: auto
			margin: 8% 0 0 0; padding: 1rem 2rem; 

			position: relative;

			.page-title-elem {
				font-size: 2rem;
				line-height: 2.5rem;
				margin: 0 auto 0.5rem;
        margin-top: 0 !important;
				text-align: center;
				width: 52%;
			}
		}

		.author-info {
			color: $black;
			position: absolute;
			top: -10%;
			width: 20%;

			.author-avatar {
        margin-left: 82%;
        margin-top: 0.5rem;
      } 

			.author-name {
				text-align: right;

				&:before {
					content: "by";
					text-align: right;
					display: inline;
					margin-right: 6px;
				}
			}
		}
	}

	.overlay-wrapper {
		.overlay-preview {
			width: 100%; height: 100%;
			top: 0; left: 0;

			background-color: rgba($black, 0.7);
			position: absolute;

			article {
				margin: 15% auto; padding: 2rem;

				position: relative;
				text-align: center;
				width: 60%;
			}

			.page-title-elem {
				margin: 0 0 0.5rem 0; padding: 0;

				color: $white;
				font-size: 2.3rem;
        font-style: italic;
				line-height: 2.8rem;
				text-align: center;
			}
		}

		// Tommy
		.author-info {
			position: relative;
			top: 1rem;
			width: 50%;
			text-align: center;
			color: white;
			left: 25%;

			.author-avatar {
				margin-left: 44%;
        margin-top: 0.5rem;
			}

			.author-name {
				text-align: center;
				&:before { text-align: center; }
			}
		}

		.image-attribution {
      background-color: transparent;
      color: $white;
		}
	}

	.phototext-wrapper, .vertical-wrapper, .video-wrapper {
		.author-info {
      margin:0;
      
      .author-name {
        border-right: none !important;
        display: inline-block !important;
        left: 0;
        margin: 0;
        margin-top: 1rem;
        text-align: left;
        vetical-align: middle;
        
        a, &:before { margin-left: 3rem; }
      }
      
      .author-avatar {
        margin: 0 1rem 0 0;
        margin-top: -2rem;
        vertical-align: middle;
      }
    }
	}

	.phototext-wrapper {    
    .phototext-preview {
			width: 40%; height: 100%;
			top: 0; right: 0;

			background-color: rgba($white, 0.7);
			color: $black;
			overflow-y: auto; //
			padding: 2rem 2rem 2rem 2rem;
			position: absolute;

			.page-title-elem {
				font-size: 1.7rem;
				line-height: 1.7rem;
        margin-top: 1.25rem !important;
			}

			.page-desc {
				font-size: 1.2rem;
				line-height: 1.7rem;
			}
    }
	}

	.vertical-wrapper {
		section {
			width: 25%; height: 100%;
		}

		.draggable-placeholder {
			width: 25%; height: 100%;
		}

		.page-bg {
			width: auto; height: 100%;
		}

		.vertical-preview {
			width: 75%; height: 100%;
			top: 0; right: 0;

			background-color: $white;
			border-left: 1px solid transparent;
			overflow-y: auto; //
			padding: 2rem 2rem 2rem 2rem; 
			position: absolute;

			article { width: 90%; } //
		}
	}

	.video-wrapper {
		.video-preview {
			width: 100%; height: 100%;

			background-color: $white;
			position: absolute;
		}

		article {
			width: 30%; height: 100%;
			top: 0; right: 0;

			border-left: 1px solid transparent;
			color: $black;
			overflow-y: auto; //
			padding: 0rem 2rem 2rem 2rem;
			position: absolute;

			.page-title-elem {
				font-size: 1.7rem;
				line-height: 1.7rem;
			}

			.page-desc {
				font-size: 1.2rem;
				line-height: 1.7rem;
        margin-top: 1.25rem !important;
			}
		}

		.video-player-container {
			width: 70%; height: 100%;
			top: 0; left: 0;

			position: absolute;

			iframe {
				width: 100%; height: 100%;
				background-color: $gray-i;
			}
		}

		.button-wrapper {
			bottom: 10%;
			position: absolute;
			text-align: center;
			width: 70%;
			z-index: 1;

			input {
				margin: 0 auto; padding: 0.5rem;

				background-color: rgba($white, 0.3);
				border: 3px solid $black;
				color: $black;
				font-weight: 700;
				position: relative;
				text-align: center;
				text-transform: uppercase;
				transition: all 0.2s ease;
				z-index: 2;
			}
		}

		.image-attribution { visibility: hidden; }
	}

	.backcover-wrapper {
		hr {
      border-top: 1px solid rgba($black, 0.1);
      margin-bottom: 30px;
    }

		#fin, #fin-next {
			float: left;
			height: 100%;
		}

		#fin {
			background-color: $white;
			color: $black;
			padding: 6rem 4rem 0 5rem; // 8rem 4rem 0 4rem
			width: 65%;

			.merci, h2 {
				display: inline-block;
				vertical-align: top;
			}

			.merci {
				top: initial; right: initial; left: initial;

				margin: 0 2rem 2rem 0;
				position: absolute;
				width: 100px;
			}

			h2 {
				line-height: 1.2;
        margin-left: 8.3rem;
        max-width: 550px;

				&:before {
					content: "You just read";
					display: block;
					font-size: 0.4em;
          font-weight: 0.8;
					line-height: 1em;
					margin: 0 0 0 0.1rem;
          margin-bottom: 5px;
          opacity: 0.7;
				}
			}

			.share-book {
				font-size: 1.7rem;
        margin: 1.3rem 0 4rem 8.5rem;
        padding-top: 5px;

				&:before {
					content: "Share this";
					@include serif;
          display: none; //
					float: left;
					font-style: italic;
					line-height: inherit;
					margin: 1px 0.5rem 0 0; // 0 0.5rem 0 0
					vertical-align: bottom;
				}

				li {
					width: auto; height: auto;

					background-image: none;
					color: $black;
					float: left;
					font: initial;
					font-size: inherit;
					line-height: inherit;
					margin: 0;

					a { display: initial; }

					&:after {
						content: "\00b7";
						display: inline-block;
						font-style: italic;
						opacity: 0.3;
						margin: 0 0.3rem;
					}

					&:first-child { color: $facebook; }
					&:nth-child(2) { color: $twitter; }

					&:last-child {
						color: $slate;
						&:after { content: ""; }
					}
				}
			}

			section { margin: 0 0 -1rem 0; }

			.author-avatar, #library-avatar {
				width: 90px; height: 90px;
				border-radius: 300rem;
				overflow: hidden;
				position: relative;

				&:after {
					width: 100%; height: 100%;
					top: 0; left: 0;
					bottom: 0; right: 0;

					box-shadow: inset 0 0 1px rgba($black, 0.5),inset 0 20px 50px 0 rgba($black, 0.95);
					border-radius: 300rem;
					content: "";
					margin: 0 auto;
					opacity: 0.3;
					position: absolute;
				}
			}

			.author-avatar {
				img {
					width: auto; height: 100%;
				}
        margin-left: 9px;
			}

			#library-avatar {
				img {
					width: 100%; height: 100%;
				}
			}

			.author-avatar, .author-name,
			#library-avatar, #library-name	{
				display: inline-block;
				vertical-align: top;
			}

			.author-name, #library-name {
				display: inline !important;
        font-size: 24px;
				margin: 0 0 0.5rem 2.3rem;
        :first-letter { text-transform: uppercase; }

				&:before {
					@include serif;
					font-size: 0.8em;
					font-style: italic;
				}
			}

			.author-name {
				&:before { content: "by "; display: none; }
			}

			#library-name {
				margin-left: 2.1rem;
        
        a { display: inline !important; }
			}
      
      #library-avatar {
        border-radius: 5px;
        margin-left: 0.7rem;
        
        &:after { box-shadow: none; }
      }

			#author-bio-blurb, #library-info-blurb {
				font-size: 1.2rem;
				line-height: 1.5rem;
				margin: -3.5rem 0 0 8.5rem;
			}
      
      #author-bio-blurb {
        font-weight: 100;
        opacity: 0.8;
      }
      
      #library-info-blurb {
        margin-left: 8.5rem;
        font-weight: 100;
        opacity: 0.8;
      }
		}

		#fin-next {
			color: $white;
			position: relative;
			text-align: left;
			width: 35%;

			.book-title {
				&:before {
					content: "Read this next:";
					color: $white;
					display: block;
					@include serif;
					font-size: 0.8rem;
					font-style: italic;
					font-weight: normal;
					letter-spacing: 0.03rem;
					margin: 0 0 0.5rem 0;
				}
			}

			&:after {
				top: 0; right: 0;
				bottom: 0; left: 0;

				background-image: linear-gradient(to right, $black, transparent);
				content: "";
				opacity: 0.8;
				position: absolute;
				z-index: 0;
			}
		}
	}

	.resize-smaller, .resize-bigger {
		top: 0; right: 0;

		background-color: $white;
		cursor: default;
		display: block;
		padding: 1rem;
		position: absolute;
		z-index: 1000; // 1 higher than fluidbox
	}

	.minimized-p {
		display: block;
		width: 50%;
	}

	.inserted-img {
	}

}

/// BOOKBLOCK /////////////////////////////////////////////////////////////////////////////////////////

.bb-bookblock {
	width: 400px; height: 300px;
	overflow-y: auto;
	overflow-x: hidden;

	backface-visibility: hidden;
	margin: 0 auto;
	// overflow: hidden; // stops 1px scroll jump
	perspective: 1300px;
	position: relative;
	z-index: 100;

	.content { position: absolute; }
}

.bb-page {
	position: absolute;
	transform-style: preserve-3d;
	transition-property: transform;
}

.bb-vertical {
	.bb-content {
		bottom: 0; left: 0;

		position: absolute;
		width: 200%;
	}

	.bb-back { transform: rotateY(-180deg); }

	.bb-page {
		width: 50%; height: 100%;

		left: 50%;
		transform-origin: left center;
	}
}

.bb-horizontal {
	.bb-content { height: 200%; }

	.bb-back { transform: rotateX(-180deg); }

	.bb-page {
		width: 100%; height: 50%;

		top: 50%;	
		transform-origin: center top;
	}
}

.bb-page > div,
.bb-outer,
.bb-content,
.bb-inner {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: $white;
	position: absolute;
}

.bb-page > div {
	transform-style: preserve-3d;
	width: 100%;
}

.bb-page > div:not(:only-child) { backface-visibility: hidden; }

.bb-outer {
	overflow: hidden;
	width: 100%;
	z-index: 999;
}

.bb-overlay, 
.bb-flipoverlay {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background-color: rgba($black, 0.7);
	opacity: 0;
	position: absolute;
}

.bb-flipoverlay { background-color: rgba($black, 0.2); }

.bb-bookblock.bb-vertical > div.bb-page:first-child,
.bb-bookblock.bb-vertical > div.bb-page:first-child .bb-back {
	transform: rotateY(180deg);
}

.bb-bookblock.bb-horizontal > div.bb-page:first-child,
.bb-bookblock.bb-horizontal > div.bb-page:first-child .bb-back {
	transform: rotateX(180deg);
}

.bb-vertical .bb-front .bb-content { left: -100%; }
.bb-horizontal .bb-front .bb-content { top: -100%; }

.bb-vertical {
	.bb-flip-next, .bb-flip-initial { transform: rotateY(-180deg); }

	.bb-flip-prev { transform: rotateY(0deg); }
	.bb-flip-next-end { transform: rotateY(-15deg); }
	.bb-flip-prev-end { transform: rotateY(-165deg); }
}

.bb-horizontal {
	.bb-flip-next, .bb-flip-initial { transform: rotateX(180deg); }

	.bb-flip-prev { transform: rotateX(0deg); }
	.bb-flip-next-end { transform: rotateX(15deg); }
	.bb-flip-prev-end { transform: rotateX(165deg); }
}

.bb-item {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: $white;
	display: none;
	position: absolute;
}

.bb-custom-wrapper {
	width: 100%; height: 100%;
	position: relative;

	.bb-bookblock {
		width: 100%; height: 100%;
		perspective: 2000px;
	}
}

.bb-custom-side {
	width: 50%; height: 100%;

	align-items: center;
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	float: left;
	justify-content: center;
	overflow: hidden;
}

.g-body blockquote { margin-bottom: 2rem; }

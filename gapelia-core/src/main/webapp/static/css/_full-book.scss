
/************************************************************************************ FULL-BOOK/SCSS **/

.full-book {

	#the-book {
		width: 100%; height: 100%;
		position: relative;
	}

	.mp-pushed {
		#g-menu-toggle {
			width: 64px !important; height: 64px !important;

			background-size: 400px 1000px !important;
			top: 1rem !important;
		}	
	}

	.bb-item {
		.content {
			width: 100%; height: 100%;
		}
	}

	/** CONTROLS ****************************************************************************************/

	header {
		width: 100%; height: 50px;
		top: -50px; left: 0;

		background-color: rgba($black, 0.3);
		color: $white;
		position: absolute;
		text-align: center;
		transition: all 0.2s ease;
		z-index: 102;

		.share-book {
			top: 0; right: 1rem;
			position: absolute;
		}
	}

	#g-menu-toggle, #header-toggle, #next-book-toggle { position: fixed; }

	#g-menu-toggle {
		width: 32px; height: 32px;

		background-size: 200px 500px;
		opacity: 1;
		top: 0.6rem;
		transition: all 0.2s ease;
		z-index: 103;

		&:hover { padding: 0 !important; }
	}
	
	#header-toggle, #next-book-toggle {
		width: 47px; height: 47px;

		background-image: url("../images/sprite-sheet.png");
		background-size: 300px 750px;
		opacity: 1;
		top: 0.5rem;
		transition: all 0.2s ease;
		z-index: 101;

		@include hide-text;
	}

	#header-toggle {
		background-position: 204px -1181px;
		cursor: default;
		left: 48.2%;
		text-align: center;
	}

	#next-book-toggle {
		background-position: 455px -1181px;
		right: 1rem;
		cursor: pointer;
	}

	#header-info {
		cursor: default;
		font-size: 1.3em;
		font-weight: 300;
		line-height: 2.5em;
	}

	#header-title {
	}

	#header-author {
		&:before {
			content: "by ";
			@include serif;
			font-size: 0.8em;
			font-style: italic;
			text-transform: lowercase;
		}
	}

	.share-book {
		li {
			width: 32px; height: 32px;

			background-image: url("../images/sprite-sheet.png");
			background-size: 200px 500px;
			display: inline-block;
			margin: 0 1rem 0 0;

			a {
				width: 100%; height: 100%;
				display: block;
			}

			&:last-child { margin: 0; }

			@include hide-text;
		}

		.facebook	{ background-position: 96px 1px; }
		.twitter	{ background-position: 64px 1px; }
		.email		{ background-position: 39px -1285px; }
	}

	#bb-nav-prev, #bb-nav-next {
		width: 32px; height: 64px;

		background-color: rgba($black, 0.7);
		background-image: url("../images/sprite-sheet.png");
		background-size: 200px 500px;
		cursor: pointer;
		position: absolute;
		bottom: 0;
		z-index: 2000;

		@include hide-text;
	}

	#bb-nav-prev {
		background-position: 0 -1285px;
		left: 0;
	}

	#bb-nav-next {
		background-position: -30px -1285px;
		right: 0;
	}

	/** LAYOUT ******************************************************************************************/

	.frontcover-wrapper, .photo-wrapper, .text-wrapper, .horizontal-wrapper,
	.overlay-wrapper, .phototext-wrapper, .vertical-wrapper, .video-wrapper, .backcover-wrapper {
		width: 100%; height: 100% !important;

		// background-size: cover;
		overflow: hidden;

		.page-bg, iframe {
			width: 100%; height: 100%;
			bottom: 0; left: 0;

			position: absolute;
		}

		.page-title-elem, .page-geotag-elem, .page-desc { display: block; }
		.page-title-elem, .page-geotag-elem { margin: 0 0 0.5rem 0; }

		.page-title-elem {
			font-size: 1.5em;
			font-weight: 700;
			line-height: 1.2;
		}

		.page-geotag-elem {
			background-color: transparent;
			border: 0;
			color: $white;
			font-size: 0.65em;
			font-weight: 600;
			text-transform: uppercase;
			width: 100%;

			&:before {
				content: "in ";
				@include serif;
				font-style: italic;
				text-transform: lowercase;
			}
		}

		.page-desc {
			@include serif;
			font-size: 1em;
			line-height: 1.4em;
			margin: 1rem 0 0 0;
			min-height: 50px;
			// overflow-x: hidden;
			text-align: center;
			white-space: pre-wrap; // preserve line breaks!
		}
	}

	.scroller-wrapper {
		width: 100%; height: 100%;

		overflow-y: auto;
		position: absolute;
	}

	.text-preview-wrapper, .phototext-preview-wrapper, .vertical-preview-wrapper, .video-preview-wrapper {
		.page-desc {
			overflow-x: hidden;
			overflow-y: auto;
			padding: 0 1rem 1rem 0;
		}
	}

	.frontcover-wrapper {
		.frontcover-preview {
			width: 100%; height: auto;
			top: 30%; left: 0;

			color: $black;
			position: absolute;

			article {
				margin: 0 auto; padding: 2rem;

				box-sizing: border-box;
				background-color: rgba($white, 0.7);
				width: 60%;
			}

			h1, h5, section {
				text-align: center;
				width: 100%;
			}

			h1 {
				font-size: 36px;
				line-height: 40px;
				margin: 0 0 0.5rem 0;
			}

			h5 {
				margin: 0 0 0.5rem 0;
				text-transform: uppercase;

				span {
					&:before {
						content: "by ";
						@include serif;
						font-style: italic;
						text-transform: lowercase;
					}
				}
			}

			section {
				margin: 0 0 1rem 0;

				.page-geotag-elem {
					appearance: textfield;
					background: transparent;
					color: $white;
					margin: 0 auto 0.5rem;
					text-align: center;
				}

				.page-desc { min-height: 25px; }
			}

			p {
				margin: 0 auto; padding: 1rem 0;

				line-height: 1.2em;
				text-align: center;
				width: 60%;
			}
		}
	}

	.photo-wrapper {
		background-color: $white;

		.page-bg {
			width: 50%; height: auto; max-height: 66%;
			top: 10%; left: 25%;

			box-shadow: 0 0 5px 0 rgba($black, 0.3);
			position: absolute;
		}

		.photo-preview {
			width: 100%; height: auto; max-height: 30%;
			bottom: 5%; /* 4rem */ left: 0;

			color: $black;
			height: auto;
			padding: 1rem 2rem;
			position: absolute;

			.page-title-elem, .page-geotag-elem, .page-desc { text-align: center; }

			.page-title-elem {
				margin: 0 auto 0.5rem;
				width: 52%;
			}

			.page-geotag-elem { color: $black; }
		}
	}

	.text-wrapper {
		.text-preview {
			width: 100%; height: 100%;

			background-color: $white;
			font-size: 1.5em;
			line-height: 2.5em;
			overflow-y: hidden;
			padding: 5% 15rem;
			// position: fixed;

			.page-geotag-elem { color: $black; }

			.page-desc {
				margin: 0 0 1rem 0; padding: 0 1rem 2rem 0;
				text-align: left;
			}
		}
	}

	.horizontal-wrapper {
		overflow-y: auto;

		section {
			width: 100%; height: 75%;
		}

		.horizontal-preview {
			width: 100%; min-height: 100%; // 25%
			top: 75%; left: 0; // bottom: 0;

			background-color: $white;
			border-top: 1px solid $gray-ii;
			color: $black;
			font-size: 1.5em;
			line-height: 2.5em;
			padding: 1rem 2rem;
			position: absolute;
			text-align: center;

			.page-title-elem {
				p {
					font-size: 36px;
					line-height: 1.2em;
				}
			}

			.page-geotag-elem {
				color: $black;
				text-align: center;
			}

			.page-desc {
				margin: 1rem auto 0;
				// overflow: auto;
				text-align: left;
				width: 70%;
			}
		}
	}

	.overlay-wrapper {
		.overlay-preview {
			width: 100%; height: 100%;
			top: 0; left: 0;

			background-color: rgba($black, 0.7);
			color: $white;
			position: absolute;

			article {
				margin: 15% auto; padding: 2rem;

				position: relative;
				text-align: center;
				width: 60%;
			}

			.page-desc {
				margin: 0 0 0.5rem 0; padding: 0;

				font-size: 36px;
				line-height: 40px;
			}

			.page-geotag-elem {
				color: $white;
				margin: 2rem 0 0 0;
				text-align: center;
			}
		}
	}

	.phototext-wrapper {
		.phototext-preview {
			width: 30%; height: 100%;
			top: 0; right: 0;

			background-color: rgba($white, 0.7);
			color: $black;
			padding: 4rem 2rem 2rem 2rem;
			position: absolute;

			.page-geotag-elem {
				margin: 0 0 1rem 0; padding: 0 0 1rem 0;

				color: $white;
				border-bottom: 1px dotted $white;
			}

			.page-desc { text-align: left; }
		}
	}

	.vertical-wrapper {
		section {
			width: 25%; height: 100%;
		}

		.draggable-placeholder {
			width: 25%; height: 100%;
		}

		.page-bg {
			width: auto; height: 100%;
		}

		.vertical-preview {
			width: 75%; height: 100%;
			top: 0; right: 0;

			background-color: $white;
			border-left: 1px solid $gray-ii;
			color: $black;
			font-size: 1.5em;
			line-height: 2.5em;
			padding: 4rem 2rem 2rem 2rem;
			position: absolute;

			.page-geotag-elem {
				margin: 0 0 1rem 0; padding: 0 0 1rem 0;

				border-bottom: 1px dotted $black;
				color: $black;
			}

			.page-desc { text-align: left; }
		}
	}

	.video-wrapper {
		.video-preview {
			width: 100%; height: 100%;

			background-color: $white;
			position: absolute;
		}

		article {
			width: 30%; height: 100%;
			top: 0; right: 0;

			border-left: 1px solid $gray-ii;
			color: $black;
			padding: 4rem 2rem 2rem 2rem;
			position: absolute;

			.page-geotag-elem {
				margin: 0 0 1rem 0; padding: 0 0 1rem 0;

				color: $black;
				border-bottom: 1px dotted $black;
			}

			.page-desc { text-align: left; }
		}

		.play-video { display: none; }

		.video-player-container {
			width: 70%; height: 100%;
			top: 0; left: 0;

			position: absolute;

			iframe {
				width: 100%; height: 100%;
				background-color: $gray-i;
			}
		}

		.button-wrapper {
			bottom: 10%;
			width: 70%;
			z-index: 1;

			input {
				margin: 0 auto; padding: 0.5rem;

				background-color: rgba($white, 0.3);
				border: 3px solid $black;
				color: $black;
				font-weight: 700;
				position: relative;
				text-align: center;
				text-transform: uppercase;
				transition: all 0.2s ease;
				z-index: 2;
			}
		}
	}

	.backcover-wrapper {
		#fin, #fin-next {
			// color: $white;
			float: left;
			height: 100%;

			a {
				// color: $slate;
				border-bottom: 1px dotted $white;
			}
		}

		#fin {
			background-color: rgba($black, 0.7);
			color: $white;
			padding: 8rem 4rem 0 4rem;
			text-align: center;
			width: 70%;

			h1 {
				margin: 0;

				&:before {
					content: "You just read";
					display: block;
					font-size: 0.3em;
					line-height: 1em;
				}
			}

			h5 {
				margin: 0 0 2rem 0;

				a:before {
					content: "found in ";
					@include serif;
					font-size: 0.8em;
					font-style: italic;
				}
			}

			#author-name {
				font-size: 24px;
				margin: 0 0 0.5rem 0;

				&:before {
					content: "by ";
					@include serif;
					font-size: 0.8em;
					font-style: italic;				
				}
			}

			#author-bio-blurb {
				@include serif;
				font-size: 20px;
				font-style: italic;
				margin: 0 0 2rem 0;
			}

			button { margin: 0 0 1rem 0; }

			.share-book {
				margin: 1rem 0 0 0;

				a { border: 0; }

				&:before {
					content: "Share this story";
					@include serif;
					font-size: 1em;
					font-style: italic;
					line-height: 1.6em;
					margin: 0 0.5rem 0 0;
					vertical-align: bottom;
				}
			}

			/*
			&:after {
				top: 0; right: 0;
				bottom: 0; left: 0;

				background-image: linear-gradient(to top, $black, $white);
				content: "";
				opacity: 0;
				position: absolute;
				z-index: 0;
			}
			*/
		}

		#fin-next {
			// background-color: rgba($black, 0.9);
			color: $white;
			position: relative;
			text-align: left; // right
			width: 30%;

			h2, section { z-index: 1; }

			h2 {
				line-height: 1.1em;
				width: auto;

				&:before {
					content: "Next Read";
					display: block;
					font-size: 0.5em;
					line-height: 1em;
					margin: 0;
				}
			}

			section {
				top: 10rem; left: 2rem;
				position: absolute;
			}

			#next-author, #next-library { font-size: 1.3em; }

			#next-author {
				margin: 1rem 0 0.3rem 0;

				&:before {
					content: "by ";
					@include serif;
					font-size: 0.8em;
					font-style: italic;				
				}
			}

			#next-library {
				&:before {
					content: "in ";
					@include serif;
					font-size: 0.8em;
					font-style: italic;				
				}
			}

			&:after {
				top: 0; right: 0;
				bottom: 0; left: 0;

				background-image: linear-gradient(to right, $black, transparent);
				content: "";
				opacity: 0.5;
				position: absolute;
				z-index: 0;
			}
		}
	}

}

/** BOOKBLOCK *****************************************************************************************/

.bb-bookblock {
	width: 400px; height: 300px;

	backface-visibility: hidden;
	margin: 0 auto;
	perspective: 1300px;
	position: relative;
	z-index: 100;

	.content { position: absolute; }
}

.bb-page {
	position: absolute;
	transform-style: preserve-3d;
	transition-property: transform;
}

.bb-vertical {
	.bb-content {
		bottom: 0; left: 0;

		position: absolute;
		width: 200%;
	}

	.bb-back { transform: rotateY(-180deg); }

	.bb-page {
		width: 50%; height: 100%;

		left: 50%;
		transform-origin: left center;
	}
}

.bb-horizontal {
	.bb-content { height: 200%; }

	.bb-back { transform: rotateX(-180deg); }

	.bb-page {
		width: 100%; height: 50%;

		top: 50%;	
		transform-origin: center top;
	}
}

.bb-page > div,
.bb-outer,
.bb-content,
.bb-inner {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: $white;
	position: absolute;
}

.bb-page > div {
	transform-style: preserve-3d;
	width: 100%;
}

.bb-page > div:not(:only-child) { backface-visibility: hidden; }

.bb-outer {
	overflow: hidden;
	width: 100%;
	z-index: 999;
}

.bb-overlay, 
.bb-flipoverlay {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background-color: rgba($black, 0.7);
	opacity: 0;
	position: absolute;
}

.bb-flipoverlay { background-color: rgba($black, 0.2); }

.bb-bookblock.bb-vertical > div.bb-page:first-child,
.bb-bookblock.bb-vertical > div.bb-page:first-child .bb-back {
	transform: rotateY(180deg);
}

.bb-bookblock.bb-horizontal > div.bb-page:first-child,
.bb-bookblock.bb-horizontal > div.bb-page:first-child .bb-back {
	transform: rotateX(180deg);
}

.bb-vertical .bb-front .bb-content { left: -100%; }
.bb-horizontal .bb-front .bb-content { top: -100%; }

.bb-vertical {
	.bb-flip-next, .bb-flip-initial { transform: rotateY(-180deg); }

	.bb-flip-prev { transform: rotateY(0deg); }
	.bb-flip-next-end { transform: rotateY(-15deg); }
	.bb-flip-prev-end { transform: rotateY(-165deg); }
}

.bb-horizontal {
	.bb-flip-next, .bb-flip-initial { transform: rotateX(180deg); }

	.bb-flip-prev { transform: rotateX(0deg); }
	.bb-flip-next-end { transform: rotateX(15deg); }
	.bb-flip-prev-end { transform: rotateX(165deg); }
}

.bb-item {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: $white;
	display: none;
	position: absolute;
}

.bb-custom-wrapper {
	width: 100%; height: 100%;
	position: relative;

	.bb-bookblock {
		width: 100%; height: 100%;
		perspective: 2000px;
	}
}

.bb-custom-side {
	width: 50%; height: 100%;

	align-items: center;
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	float: left;
	justify-content: center;
	overflow: hidden;
}

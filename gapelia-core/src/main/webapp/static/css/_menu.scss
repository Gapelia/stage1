/***************************************************************************************** MENU/SCSS **/

.super-wrapper {
	height: 100%;
	left: 0;
	position: relative;
}

.mp-menu {
	width: 300px; height: 100%;
	top: 0; left: 0;

	background-color: $slate;
	position: absolute;
	transform: translate3d(-100%, 0, 0);
	z-index: 2 !important;

	a { color: $white; }

	.mp-level {
		width: 100%; height: 100%;
		top: 0; left: 0;

		overflow-y: auto;
		position: absolute;
		transform: translate3d(-100%, 0, 0);

		-moz-transform: translate3d(-100%, 0, 0);
		-webkit-transform: translate3d(-100%, 0, 0);
	}

	-moz-transform: translate3d(-100%, 0, 0);
	-webkit-transform: translate3d(-100%, 0, 0);
}

// Overlays for pusher and for level that gets covered
.super-wrapper::after, .mp-level::after, .mp-level::before {
	width: 0; height: 0;
	top: 0; right: 0;

	content: "";
	opacity: 0;
	position: absolute;
}

.super-wrapper::after, .mp-level::after {
	background-color: rgba($black, 0.7);
	transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;

	-moz-transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;
	-webkit-transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;
}

.mp-level::after { z-index: -1; }

.super-wrapper.mp-pushed {
	#g-menu-toggle {
		left: -5rem;
		opacity: 1;
	}

	.book-info, .collection-info, .library-info, .new-inner-wrapper, .portal-info, canvas, .add-this, .wrapper,
	.user-avatar, .user-data, .button-wrapper, #the-book, .book-title {
		transition: all 0.2s ease;
		z-index: 0 !important;
	}

	.featured-info, .bookmark-this, #bb-nav-prev, #bb-nav-next, #header-toggle, #next-book-toggle {
		opacity: 0.1;
		transition: all 0.2s ease;
	}
}

.super-wrapper.mp-pushed::after, .mp-level.mp-level-overlay::after {
	width: 100%; height: 100%;

	opacity: 1;
	transition: opacity 0.3s;

	-moz-transition: opacity 0.3s;
	-webkit-transition: opacity 0.3s;
}

.mp-level.mp-level-overlay { cursor: pointer; }

.mp-level.mp-level-overlay.mp-level::before {
	width: 100%; height: 100%;

	background: transparent;
	opacity: 1;
}

.super-wrapper, .mp-level {
	transition: all 0.5s ease;

	-moz-transition: all 0.5s;
	-webkit-transition: all 0.5s;
}

// Overlap
.mp-overlap .mp-level.mp-level-open {
	box-shadow: 1px 0 2px rgba($black, 0.2);
	transform: translate3d(-40px, 0, 0);

	-moz-transform: translate3d(-40px, 0, 0);
	-webkit-transform: translate3d(-40px, 0, 0);
}

// First Level
.mp-menu, .mp-menu.mp-overlap {
	.mp-level, .mp-level.mp-level-open {
		box-shadow: none;
		transform: translate3d(0, 0, 0);

		-moz-transform: translate3d(0, 0, 0);
		-webkit-transform: translate3d(0, 0, 0);
	}
}

// Cover
.mp-cover {
	.mp-level.mp-level-open {
		transform: translate3d(0, 0, 0);

		ul {
			li {
				.mp-level {
					&:not(.mp-level-open) {
						transform: translate3d(-100%, 0, 0);

						-moz-transform: translate3d(-100%, 0, 0);
						-webkit-transform: translate3d(-100%, 0, 0);
					}
				}
			}
		}

		-moz-transform: translate3d(0, 0, 0);
		-webkit-transform: translate3d(0, 0, 0);
	}
}

// Content Style
.mp-menu.mp-overlap {
	h2 {
		&:before {
			top: 0; right: 0;

			font-size: 75%;
			line-height: 1.8;
			margin-right: 8px;
			opacity: 0;
			position: absolute;
			transform: translateX(-100%);
			transition: opacity 0.3s, transform 0.1s 0.3s;

			-moz-transform: translateX(-100%);
			-moz-transition: opacity 0.3s, -moz-transform 0.1s 0.3s;
			-webkit-transform: translateX(-100%);
			-webkit-transition: opacity 0.3s, -webkit-transform 0.1s 0.3s;
		}
	}
}

.mp-menu.mp-cover {
	h2 {
		font-size: 1em;
		font-weight: 700;
		letter-spacing: 1px;
		text-transform: uppercase;
	}
}

.mp-overlap {
	.mp-level.mp-level-overlay {
		h2 {
			&:before {
				opacity: 1;
				transform: translateX(0);
				transition: transform 0.3s, opacity 0.3s;

				-moz-transform: translateX(0);
				-moz-transition: -moz-transform 0.3s, opacity 0.3s;
				-webkit-transform: translateX(0);
				-webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
			}
		}
	}
}

.mp-menu {
	h2 {
		margin: 0; padding: 1em;

		color: rgba($white, 0.4);
		font-size: 2em;
		font-weight: 300;
		text-shadow: 0 0 1px rgba($black, 0.1);
	}

	ul {
		margin: 0; padding: 0;

		list-style: none;
		overflow: hidden;

		li {
			&:before {
				color: rgba($black, 0.2);
				left: 10px;
				line-height: 3.5;
				position: absolute;
				z-index: -1;
			}

			a {
				box-shadow: inset 0 -1px rgba($black, 0.2);
				display: block;
				font-size: 1.4em;
				outline: none;
				padding: 0.7em 1em 0.7em 1.5em; // 0 0 0 1em;
				text-shadow: 0 0 1px rgba($white, 0.1);
				transition: background 0.3s, box-shadow 0.3s;

				&:hover {
					background-color: rgba($black, 0.2);
					box-shadow: inset 0 -1px rgba($black, 0);
				}

				-moz-transition: background 0.3s, box-shadow 0.3s;
				-webkit-transition: background 0.3s, box-shadow 0.3s;
			}

			#gpl-menu-me {
				&:hover {
					&:after { content: "\00a0\00b7\00a0Visit Profile"; }
				}
			}

			#gpl-menu-create {
				&:hover {
					&:after { content: "\00a0your next opus"; }
				}
			}

			#gpl-menu-drafts {
				&:hover {
					&:after { content: "\00a0\00b7\00a0 Continue?"; }
				}
			}

			ul {
				width: 100%; height: 0;

				background-color: rgba($black, 0.5);
				color: $white;
				display: none; //
				transition: all 0.2s ease;

				li {
					font-size: 1.4em;
					padding: 0.7em 1em 0.7em 1.5em;

					a {
						margin: 0; padding: 0;

						border: 0;
						box-shadow: none !important;
						font-size: inherit;

						&:hover {
							background-color: inherit !important;
							box-shadow: none !important;
						}
					}
				}
			}

			&:hover {
				ul {
					display: block;
					height: 100%;
				}
			}
		}
	}

	.mp-level.mp-level-overlay {
		ul {
			li {
				a { box-shadow: inset 0 -1px rgba($black, 0); }
			}
		}

		.mp-back, .mp-back:after {
			background-color: transparent;
			box-shadow: none;
			color: transparent;
		}
	}
}

.mp-level {
	ul {
		li {
			&:first-child {
				a {
					box-shadow: inset 0 -1px rgba($black, 0.2), inset 0 1px rgba($black, 0.2);

					&:hover {
						background-color: rgba($black, 0.2);
						box-shadow: inset 0 -1px rgba($black, 0);
					}
				}
			}
		}
	}
}

.mp-level.mp-level-overlay {
	ul {
		li {
			&:first-child {
				a { box-shadow: inset 0 -1px rgba($black, 0); }
			}
		}
	}
}

.mp-back {
	background-color: rgba($black, 0.1);
	box-shadow: inset 0 1px rgba($black, 0.1);
	color: $white;
	display: block;
	font-size: 0.8em;
	font-weight: 700;
	letter-spacing: 1px;
	outline: none;
	padding: 1em;
	position: relative;
	text-transform: uppercase;
	transition: background 0.3s;

	&:after {
		color: rgba($black, 0.3);
		content: "\e037";
		font-family: "linecons";
		font-size: 1.3em;
		position: absolute;
		right: 10px;
	}

	-moz-transition: background 0.3s;
	-webkit-transition: background 0.3s;
}

// Fallback example for browsers that don't support 3D transforms (and no JS fallback)
// We'll show the first level only

.no-csstransforms3d, .no-js {
	.super-wrapper { padding-left: 300px; }

	.mp-menu {
		.mp-level { display: none; }
		> .mp-level { display: block; }
	}
}

/*********************************************************************************************************************************************/

.scroller, .scroller-inner { position: relative; }

.container {
	background-color: #34495e;
	overflow: hidden;
	position: relative; // fixed
}

.gpl-pusher {
	width: 100%; height: 100%;

	left: 0;
	position: absolute; // relative
}

.gpl-menu {
	width: 200px; height: 100%;
	top: 0; left: 0;

	position: absolute; // we can't use fixed here :(
	transform: translate3d(-100%, 0, 0);
	z-index: 1;

	-moz-transform: translate3d(-100%, 0, 0);
	-webkit-transform: translate3d(-100%, 0, 0);
}

.gpl-level {
	width: 100%; height: 100%;
	top: 0; left: 0;

	background: #336ca6;
	position: absolute;
	transform: translate3d(-100%, 0, 0);

	-moz-transform: translate3d(-100%, 0, 0);
	-webkit-transform: translate3d(-100%, 0, 0);
}

// Overlays for pusher and for level that gets covered
.gpl-pusher::after, .gpl-level::after, .gpl-level::before {
	width: 0; height: 0;
	top: 0; right: 0;

	content: "";
	opacity: 0;
	position: absolute;
}

.gpl-pusher::after, .gpl-level::after {
	background: rgba($black, 0.3);
	transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;

	-moz-transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;
	-webkit-transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;
}

.gpl-level::after { z-index: -1; }

.gpl-pusher.gpl-pushed::after, .gpl-level.gpl-level-overlay::after {
	width: 100%; height: 100%;

	opacity: 1;
	transition: opacity 0.3s;

	-moz-transition: opacity 0.3s;
	-webkit-transition: opacity 0.3s;
}

.gpl-level.gpl-level-overlay { cursor: pointer; }

.gpl-level.gpl-level-overlay.gpl-level::before {
	width: 100%; height: 100%;

	background: transparent;
	opacity: 1;
}

.gpl-pusher, .gpl-level {
	transition: all 0.5s;

	-moz-transition: all 0.5s;
	-webkit-transition: all 0.5s;
}

// Overlap
.gpl-overlap .gpl-level.gpl-level-open {
	box-shadow: 1px 0 2px rgba($black, 0.2);
	transform: translate3d(-40px, 0, 0);

	-moz-transform: translate3d(-40px, 0, 0);
	-webkit-transform: translate3d(-40px, 0, 0);
}

// First Level
.gpl-menu > .gpl-level,
.gpl-menu > .gpl-level.gpl-level-open,
.gpl-menu.gpl-overlap > .gpl-level,
.gpl-menu.gpl-overlap > .gpl-level.gpl-level-open {
	box-shadow: none;
	transform: translate3d(0, 0, 0);

	-moz-transform: translate3d(0, 0, 0);
	-webkit-transform: translate3d(0, 0, 0);
}

// Cover
.gpl-cover .gpl-level.gpl-level-open {
	transform: translate3d(0, 0, 0);

	-moz-transform: translate3d(0, 0, 0);
	-webkit-transform: translate3d(0, 0, 0);
}

.gpl-cover .gpl-level.gpl-level-open > ul > li > .gpl-level:not(.gpl-level-open) {
	transform: translate3d(-100%, 0, 0);

	-moz-transform: translate3d(-100%, 0, 0);
	-webkit-transform: translate3d(-100%, 0, 0);
}

// Content Style
.gpl-menu ul {
	margin: 0; padding: 0;
	list-style: none;
}

.gpl-menu h2 {
	margin: 0; padding: 0.5rem 1rem;

	color: rgba($black, 0.4);
	font-size: 1em;
	font-weight: 300;
	line-height: 2em;
	text-shadow: 0 0 1px rgba($black, 0.1);
}

.gpl-menu.gpl-overlap h2::before {
	top: 0; right: 0;

	font-size: 75%;
	line-height: 1.8;
	margin-right: 8px;
	opacity: 0;
	position: absolute;
	transform: translateX(-100%);
	transition: opacity 0.3s, transform 0.1s 0.3s;

	-moz-transform: translateX(-100%);
	-webkit-transform: translateX(-100%);
	-moz-transition: opacity 0.3s, -moz-transform 0.1s 0.3s;
	-webkit-transition: opacity 0.3s, -webkit-transform 0.1s 0.3s;
}

.gpl-menu.gpl-cover h2 {
	font-size: 1em;
	font-weight: 700;
	letter-spacing: 1px;
	text-transform: uppercase;
}

.gpl-overlap .gpl-level.gpl-level-overlay > h2::before {
	opacity: 1;
	transform: translateX(0);
	transition: transform 0.3s, opacity 0.3s;

	-moz-transform: translateX(0);
	-webkit-transform: translateX(0);
	-moz-transition: -moz-transform 0.3s, opacity 0.3s;
	-webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
}

.gpl-menu ul li::before {
	color: rgba($black, 0.2);
	left: 10px;
	line-height: 3.5;
	position: absolute;
	z-index: -1;
}

.gpl-back {
	background: rgba($black, 0.1);
	box-shadow: inset 0 1px rgba($black, 0.1);
	color: $white;
	display: block;
	font-size: 0.8em;
	font-weight: 700;
	letter-spacing: 1px;
	outline: none;
	padding: 1em;
	position: relative;
	text-transform: uppercase;
	transition: background 0.3s;

	-moz-transition: background 0.3s;
	-webkit-transition: background 0.3s;
}

.gpl-back::after {
	color: rgba($black, 0.3);
	content: "\e037";
	font-family: 'linecons';
	font-size: 1.3em;
	position: absolute;
	right: 10px;
}

.gpl-menu .gpl-level.gpl-level-overlay > .gpl-back,
.gpl-menu .gpl-level.gpl-level-overlay > .gpl-back::after {
	background: transparent;
	box-shadow: none;
	color: transparent;
}

// Fallback example for browsers that don't support 3D transforms (and no JS fallback)
// We'll show the first level only
.no-csstransforms3d .gpl-pusher, .no-js .gpl-pusher { padding-left: 200px; }
.no-csstransforms3d .gpl-menu .gpl-level, .no-js .gpl-menu .gpl-level { display: none; }
.no-csstransforms3d .gpl-menu > .gpl-level, .no-js .gpl-menu > .gpl-level { display: block; }

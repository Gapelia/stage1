/**************************************************************************************** BOOK/SCSS **/

.book {

	/* Start flip code */
	.flipContainer {
		perspective: 3000px;
		position: relative;
		user-select: none;

		-webkit-perspective: 3000px;

		-ms-user-select: none;
		-moz-user-select: none;
		-khtml-user-select: none;
		-webkit-user-select: none;
		-webkit-tap-highlight-color: rgba(0, 0, 0, 0);

		/* pager */
		.pager {
			text-align: center;
			height: 24px;
			line-height: 6px;
			position: absolute;
			bottom: 0;
			width: 100%;
			cursor: pointer;
			font-size: 6px;
			overflow: hidden;

			span.dot {
				/* background-image: url("images/pager6x6.png"); */
				background-repeat: no-repeat;
				background-position: 0 -6px;
				display: inline-block;
				margin: 8px 5px;
				text-decoration: none;
				width: 6px;
			}

			span.dot.current  { background-position: 0 0; }
		}
	}

	.flipContent {
		width: 100%; height: 100%;
		top: 0; left: 0;

		display: none;
		overflow: hidden;
		position: absolute;
	}

	.flipContent.flipCurrent { display: block; }

	.sliding, .slidingBg {
		background-color: inherit;
		overflow: hidden;
		position: absolute;
		z-index: 1;
	}

	.flipping {
		background-color: inherit;
		backface-visibility: hidden;
		transform: rotateY(0deg);
		transform-style: preserve3d;
	}

	.flipping.firstHalf { transform-origin: 100% 0; }
	.flipping.secondHalf { transform-origin: 0 0; }

	.backflipping {
		background-color: inherit;
		backface-visibility: hidden;
		display: none;
		transform: rotateY(180deg);
		transform-style: flat;
	}

	.horizontalFlipping.firstHalf { transform-origin: 100% 0; }
	.horizontalFlipping.secondHalf { transform-origin: 0 0; }

	.verticalFlipping.firstHalf { transform-origin: 0 100%; }
	.verticalFlipping.secondHalf { transform-origin: 0 0; }

	.splitHalf {
		overflow: hidden;
		position: absolute;
	}

	.splitEmpty { background-color: #333; }
	/* End flip code */

	#photo-fullview-wrapper, #text-fullview-wrapper,
	#integrated-fullview-wrapper, #phototext-fullview-wrapper,
	#frontcover-fullview-wrapper, #video-fullview-wrapper,
	#backcover-wrapper {
		#page-sidebar, #page-actions {
			margin: 0;
			position: absolute;
			z-index: 1;

			li {
				width: 60px; height: 60px;

				background-size: 60px;
				transition: all 0.2s;
				@include hide-text;

				a {
					width: 100%; height: 100%;
					display: block;
				}

				&:hover { opacity: 0.7; }
			}
		}

		#page-sidebar {
			width: auto; height: 50%;

			display: inherit;
			padding: 0 3rem;
			vertical-align: inherit;

			li {
				margin: 0 0 1rem 0;
				&:last-child { margin: 0; }
			}

			#book-wiki { background-image: url("../images/book-wiki.png"); }
			#book-r2r { background-image: url("../images/book-r2r.png"); }
		}
	}

	.current-thumbnail {
		a { border: 3px solid $slate; }
	}

	#page-scroller-wrapper {
		#page-scroller {
			.page {
				a {
					width: 100px; height: 100px;
					overflow: hidden;

					img {
						width: auto; height: 100%;
					}
				}
			}
		}
	}

	#wiki-window {
		width: 500px; height: 100%;
		margin: 50px 0 100px 0; padding: 2rem 2rem 3rem 2rem;
		top: 0; left: 10%;

		background-color: $white;
		color: $black;
		display: none;
		overflow-x: hidden; overflow-y: scroll;
		position: absolute;
		transition: all 0.2s;

		.wiki-footer {
			cursor: default;
			float: right;
			font-family: Georgia, serif;
			font-size: 0.7em;
			font-style: italic;
			line-height: 20px;
			opacity: 0.3;
			padding: 0 0 2rem 0;
			transition: opacity 0.2s;

			span {
				width: 20px; height: 20px;

				background: url("../images/logo-wiki-w.png") no-repeat;
				background-size: 20px 20px;
				display: inline-block;
				margin: 0 0 0 0.1rem;
				vertical-align: top;

				@include hide-text;
			}

			&:hover { opacity: 1; }
		}

		p {
			font-size: 1em;
			line-height: 1.6em;
			text-align: justify;
		}
	}
}

#backcover-wrapper {
	background-color: rgba($black, 0.7);
	color: $white;

	#book-credits, #book-comments {
		display: inline-block;
		vertical-align: top;
	}

	#book-credits {
		width: 69.8%; height: 100%;
		padding: 4rem 0 0 6rem;

		h2 {
			font-family: "OpenSansBold";
			margin: 0 0 2rem 0;
		}

		#author-column, #story-column {
			display: inline-block;
			vertical-align: top;
		}

		#author-column {
			margin: 0 2rem 0 0;

			#author-portrait {
				width: 150px; height: auto;
			}
			
			.profile-btn {
				margin: -2px 0 1rem 0;
			}

			button {
				width: 150px; height: auto;
				margin: 0; padding: 1rem 0;

				background-color: $slate;
				border-radius: 0;
				color: $white;
				display: block;
				font-size: 1em;
				margin: 0 0 1rem 0;
				text-align: center;
				text-shadow: none;
			}
		}

		#story-column {
			h5 { font-family: "OpenSansBold"; }

			ul, p { margin: 0 0 1rem 0; }
			a { color: inherit; }

			#story-stats {
				li { float: left; }
			}

			#story-contributors {
				li { line-height: 1.6em; }
			}
		}
	}

	#book-comments {
		width: 30%; height: 100%;

		border-left: 1px solid $gray-i;
		padding: 1rem;
		position: relative;

		#disqus_thread {
			width: 400px; height: 100%;
			top: 0; left: 0;

			background-color: rgba($slate, 0.3);
			position: absolute;
		}
	}
}

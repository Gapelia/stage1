/***************************************************************************************** MENU/SCSS **/

/*
.menu-trigger {
	font-size: 0.9em;
	padding-left: 60px;
	position: relative;

	&:before {
		width: 40px; height: 6px;
		top: 2px; left: 0;

		background-color: #fff;
		box-shadow: 0 6px #34495e, 0 12px #fff, 0 18px #34495e, 0 24px #fff;
		content: "";
		position: absolute;
	}
}
*/

.super-wrapper {
	height: 100%;
	left: 0;
	position: relative;
}

.mp-menu {
	width: 300px; height: 100%;
	top: 0; left: 0;

	background-color: $slate;
	position: absolute;
	transform: translate3d(-100%, 0, 0);
	z-index: 2 !important;

	a { color: $white; }

	.mp-level {
		width: 100%; height: 100%;
		top: 0; left: 0;

		position: absolute;
		transform: translate3d(-100%, 0, 0);

		-moz-transform: translate3d(-100%, 0, 0);
		-webkit-transform: translate3d(-100%, 0, 0);
	}

	-moz-transform: translate3d(-100%, 0, 0);
	-webkit-transform: translate3d(-100%, 0, 0);
}

/* overlays for pusher and for level that gets covered */
.super-wrapper::after, .mp-level::after, .mp-level::before {
	width: 0; height: 0;
	top: 0; right: 0;

	content: "";
	opacity: 0;
	position: absolute;
}

.super-wrapper::after, .mp-level::after {
	background-color: rgba($black, 0.7);
	transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;

	-moz-transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;
	-webkit-transition: opacity 0.3s, width 0.1s 0.3s, height 0.1s 0.3s;
}

.mp-level::after { z-index: -1; }

.super-wrapper.mp-pushed {
	#g-menu-toggle { opacity: 1; }

	.book-info, .collection-info, .library-info, .new-inner-wrapper, .portal-info, canvas {
		transition: all 0.2s ease;
		z-index: 0 !important;
	}

	.featured-info {
		opacity: 0.2;
		transition: all 0.2s ease;
	}
}

.super-wrapper.mp-pushed::after, .mp-level.mp-level-overlay::after {
	width: 100%; height: 100%;

	opacity: 1;
	transition: opacity 0.3s;

	-moz-transition: opacity 0.3s;
	-webkit-transition: opacity 0.3s;
}

.mp-level.mp-level-overlay { cursor: pointer; }

.mp-level.mp-level-overlay.mp-level::before {
	width: 100%; height: 100%;

	background: transparent;
	opacity: 1;
}

.super-wrapper, .mp-level {
	transition: all 0.5s ease;

	-moz-transition: all 0.5s;
	-webkit-transition: all 0.5s;
}

/* overlap */
.mp-overlap .mp-level.mp-level-open {
	box-shadow: 1px 0 2px rgba($black, 0.2);
	transform: translate3d(-40px, 0, 0);

	-moz-transform: translate3d(-40px, 0, 0);
	-webkit-transform: translate3d(-40px, 0, 0);
}

/* First level */
.mp-menu, .mp-menu.mp-overlap {
	.mp-level, .mp-level.mp-level-open {
		box-shadow: none;
		transform: translate3d(0, 0, 0);

		-moz-transform: translate3d(0, 0, 0);
		-webkit-transform: translate3d(0, 0, 0);
	}
}

/* cover */
.mp-cover {
	.mp-level.mp-level-open {
		transform: translate3d(0, 0, 0);

		ul {
			li {
				.mp-level {
					&:not(.mp-level-open) {
						transform: translate3d(-100%, 0, 0);

						-moz-transform: translate3d(-100%, 0, 0);
						-webkit-transform: translate3d(-100%, 0, 0);
					}
				}
			}
		}

		-moz-transform: translate3d(0, 0, 0);
		-webkit-transform: translate3d(0, 0, 0);
	}
}

/* content style */
.mp-menu {
	ul {
		margin: 0; padding: 0;
		list-style: none;
	}

	li a { padding: 0 0 0 1em; }

	h2 {
		margin: 0; padding: 1em;

		color: rgba($white, 0.4);
		font-size: 2em;
		font-weight: 300;
		text-shadow: 0 0 1px rgba($black, 0.1);
	}
}

.mp-menu.mp-overlap {
	h2 {
		&:before {
			top: 0; right: 0;

			font-size: 75%;
			line-height: 1.8;
			margin-right: 8px;
			opacity: 0;
			position: absolute;
			transform: translateX(-100%);
			transition: opacity 0.3s, transform 0.1s 0.3s;

			-moz-transform: translateX(-100%);
			-moz-transition: opacity 0.3s, -moz-transform 0.1s 0.3s;
			-webkit-transform: translateX(-100%);
			-webkit-transition: opacity 0.3s, -webkit-transform 0.1s 0.3s;
		}
	}
}

.mp-menu.mp-cover {
	h2 {
		font-size: 1em;
		font-weight: 700;
		letter-spacing: 1px;
		text-transform: uppercase;
	}
}

.mp-overlap {
	.mp-level.mp-level-overlay {
		h2 {
			&:before {
				opacity: 1;
				transform: translateX(0);
				transition: transform 0.3s, opacity 0.3s;

				-moz-transform: translateX(0);
				-moz-transition: -moz-transform 0.3s, opacity 0.3s;
				-webkit-transform: translateX(0);
				-webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
			}
		}
	}
}

.mp-menu {
	ul {
		li {
			&:before {
				color: rgba($black, 0.2);
				left: 10px;
				line-height: 3.5;
				position: absolute;
				z-index: -1;
			}

			a {
				box-shadow: inset 0 -1px rgba($black, 0.2);
				display: block;
				font-size: 1.4em;
				outline: none;
				padding: 0.7em 1em 0.7em 1.5em;
				text-shadow: 0 0 1px rgba($white, 0.1);
				transition: background 0.3s, box-shadow 0.3s;
				
				&:hover {
					background-color: rgba($black, 0.2);
					box-shadow: inset 0 -1px rgba($black, 0);
				}

				-moz-transition: background 0.3s, box-shadow 0.3s;
				-webkit-transition: background 0.3s, box-shadow 0.3s;
			}
		}
	}

	.mp-level.mp-level-overlay {
		ul {
			li {
				a { box-shadow: inset 0 -1px rgba($black, 0); }
			}
		}

		.mp-back, .mp-back:after {
			background-color: transparent;
			box-shadow: none;
			color: transparent;
		}
	}
}

.mp-level {
	ul {
		li {
			&:first-child {
				a {
					box-shadow: inset 0 -1px rgba($black, 0.2), inset 0 1px rgba($black, 0.2);

					&:hover {
						background-color: rgba($black, 0.2);
						box-shadow: inset 0 -1px rgba($black, 0);
					}
				}
			}
		}
	}
}

.mp-level.mp-level-overlay {
	ul {
		li {
			&:first-child {
				a { box-shadow: inset 0 -1px rgba($black, 0); }
			}
		}
	}
}

.mp-back {
	background-color: rgba($black, 0.1);
	box-shadow: inset 0 1px rgba($black, 0.1);
	color: #fff;
	display: block;
	font-size: 0.8em;
	font-weight: 700;
	letter-spacing: 1px;
	outline: none;
	padding: 1em;
	position: relative;
	text-transform: uppercase;
	transition: background 0.3s;

	&:after {
		color: rgba($black, 0.3);
		content: "\e037";
		font-family: "linecons";
		font-size: 1.3em;
		position: absolute;
		right: 10px;
	}

	-moz-transition: background 0.3s;
	-webkit-transition: background 0.3s;
}

/* Fallback example for browsers that don't support 3D transforms (and no JS fallback) */
/* We'll show the first level only */

.no-csstransforms3d, .no-js {
	.super-wrapper { padding-left: 300px; }

	.mp-menu {
		.mp-level { display: none; }
		> .mp-level { display: block; }
	}
}
